{"version":3,"file":"courses.min.js","sources":["../src/courses.js"],"sourcesContent":["\n// This file is part of Moodle - http://moodle.org/.\n//\n// Moodle is free software: you can redistribute it and/or modify.\n// it under the terms of the GNU General Public License as published by.\n// the Free Software Foundation, either version 3 of the License, or.\n// This file is part of Moodle - http://moodle.org/.\n// Moodle is distributed in the hope that it will be useful,.\n// but WITHOUT ANY WARRANTY; without even the implied warranty of.\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the.\n// This file is part of Moodle - http://moodle.org/.\n// You should have received a copy of the GNU General Public License.\n// This file is part of Moodle - http://moodle.org/.\n/*\n * @package   local_restrict\n * @copyright 2025 Moayad Shloul <shloul97@gmail.com>\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later.\n */\ndefine(\n    ['jquery', 'core/ajax','core/str'], function ($, Ajax,str) {\n        'use strict';\n        return {\n            init: function () {\n\n                var msg;\n                var status;\n                var statustxt;\n                var response;\n                var args;\n                var delconfirm;\n                var failedalert;\n\n                var strings = [\n                { key: 'msg', component: 'local_restrict' },\n                { key: 'status', component: 'local_restrict' },\n                { key: 'statustxt', component: 'local_restrict' },\n                { key: 'response', component: 'local_restrict' },\n                { key: 'args', component: 'local_restrict' },\n                { key: 'delconfirm', component: 'local_restrict' },\n                { key: 'failedalert', component: 'local_restrict' }\n                ];\n\n                str.get_strings(strings).then(\n                    function (results) {\n                        msg = results[0];\n                        status = results[1];\n                        statustxt = results[2];\n                        response = results[3];\n                        args = results[4];\n                        delconfirm = results[5];\n                        failedalert = results[6];\n                    }\n                ).catch(\n                    function (e) {\n                        alert(failedalert, e);\n                    }\n                );\n\n\n                $('button[name=action-btn]').click(\n                    function () {\n                        var courseId = $(this).attr('data-id');\n                        var action = $(this).attr('data-action');\n\n                        if (action === 'del') {\n                            if (confirm(delconfirm) == true) {\n                                var courseargs = {\n                                    courseid: parseInt(courseId),\n                                    action: action.toString()\n                                };\n                                Ajax.call(\n                                    [{\n                                        methodname: 'local_restrict_courses_records',\n                                        args: courseargs\n                                    }]\n                                )[0].then(\n                                    function () {\n                                        $('#tr-' + courseId).fadeOut(300);\n                                    }\n                                ).catch(\n                                    function (err) {\n                                        let fullError = `\n                                         <div style=\"color:red;\">\n                                            <strong> ${str.get_string('ajxerr','local_restrict')}</strong><br>\n                                            ${msg} ${err.message || 'N/A'}<br>\n                                            ${status} ${err.status || 'N/A'}<br>\n                                            ${statustxt} ${err.statusText || 'N/A'}<br>\n                                            ${response}\n                                            ${err.responseText || JSON.stringify(err)}<br>\n                                            ${args}\n                                            ${JSON.stringify(courseargs)}\n                                        </div>\n                                        `;\n                                        $('#ajx-err').html(fullError);\n                                    }\n                                );\n                            }\n\n                            else {\n\n                            }\n                        }\n\n                    }\n                );\n            }\n        };\n    }\n);\n\n"],"names":["define","$","Ajax","str","init","msg","status","statustxt","response","args","delconfirm","failedalert","get_strings","key","component","then","results","catch","e","alert","click","courseId","this","attr","action","confirm","courseargs","courseid","parseInt","toString","call","methodname","fadeOut","err","fullError","get_string","message","statusText","responseText","JSON","stringify","html"],"mappings":";;;;;AAkBAA,gCACI,CAAC,SAAU,YAAY,aAAa,SAAUC,EAAGC,KAAKC,WAE3C,CACHC,KAAM,eAEEC,IACAC,OACAC,UACAC,SACAC,KACAC,WACAC,YAYJR,IAAIS,YAVU,CACd,CAAEC,IAAK,MAAOC,UAAW,kBACzB,CAAED,IAAK,SAAUC,UAAW,kBAC5B,CAAED,IAAK,YAAaC,UAAW,kBAC/B,CAAED,IAAK,WAAYC,UAAW,kBAC9B,CAAED,IAAK,OAAQC,UAAW,kBAC1B,CAAED,IAAK,aAAcC,UAAW,kBAChC,CAAED,IAAK,cAAeC,UAAW,oBAGRC,MACrB,SAAUC,SACNX,IAAMW,QAAQ,GACdV,OAASU,QAAQ,GACjBT,UAAYS,QAAQ,GACpBR,SAAWQ,QAAQ,GACnBP,KAAOO,QAAQ,GACfN,WAAaM,QAAQ,GACrBL,YAAcK,QAAQ,MAE5BC,OACE,SAAUC,GACNC,MAAMR,YAAaO,MAK3BjB,EAAE,2BAA2BmB,OACzB,eACQC,SAAWpB,EAAEqB,MAAMC,KAAK,WACxBC,OAASvB,EAAEqB,MAAMC,KAAK,kBAEX,QAAXC,QAC2B,GAAvBC,QAAQf,YAAqB,KACzBgB,WAAa,CACbC,SAAUC,SAASP,UACnBG,OAAQA,OAAOK,YAEnB3B,KAAK4B,KACD,CAAC,CACGC,WAAY,iCACZtB,KAAMiB,cAEZ,GAAGX,MACD,WACId,EAAE,OAASoB,UAAUW,QAAQ,QAEnCf,OACE,SAAUgB,SACFC,8IAEW/B,IAAIgC,WAAW,SAAS,wFACjC9B,gBAAO4B,IAAIG,SAAW,mEACtB9B,mBAAU2B,IAAI3B,QAAU,mEACxBC,sBAAa0B,IAAII,YAAc,mEAC/B7B,kEACAyB,IAAIK,cAAgBC,KAAKC,UAAUP,kEACnCxB,8DACA8B,KAAKC,UAAUd,0GAGrBzB,EAAE,YAAYwC,KAAKP"}