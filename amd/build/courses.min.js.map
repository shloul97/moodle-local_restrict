{"version":3,"file":"courses.min.js","sources":["../src/courses.js"],"sourcesContent":["define(['jquery', 'core/ajax','core/str'], function ($, Ajax,str) {\n    'use strict';\n    return {\n        init: function () {\n\n            var msg;\n            var status;\n            var statustxt;\n            var response;\n            var args;\n\n            var strings = [\n                { key: 'msg', component: 'local_restrict' },\n                { key: 'status', component: 'local_restrict' },\n                { key: 'statustxt', component: 'local_restrict' },\n                { key: 'response', component: 'local_restrict' },\n                { key: 'args', component: 'local_restrict' }\n            ];\n\n             str.get_strings(strings).then(function (results) {\n                msg = results[0];\n                status = results[1];\n                statustxt = results[2];\n                response = results[3];\n                args = results[4];\n            }).catch(function (e) {\n                alert('Failed to load strings:', e);\n            });\n\n\n            $('button[name=action-btn]').click(function () {\n                var courseId = $(this).attr('data-id');\n                var action = $(this).attr('data-action');\n\n                if (action === 'del') {\n                    if (confirm(\"Are You sure you want to delete record ?\") == true) {\n                        var courseargs = {\n                            courseid: parseInt(courseId),\n                            action: action.toString()\n                        };\n                        Ajax.call([{\n                            methodname: 'local_restrict_courses_records',\n                            args: courseargs\n                        }])[0].then(function () {\n                            $('#tr-' + courseId).fadeOut(300);\n                        }).catch(function (err) {\n                            let fullError = `\n                                     <div style=\"color:red;\">\n                                        <strong> ${str.get_string('ajxerr','local_restrict')}</strong><br>\n                                        ${msg} ${err.message || 'N/A'}<br>\n                                        ${status} ${err.status || 'N/A'}<br>\n                                        ${statustxt} ${err.statusText || 'N/A'}<br>\n                                        ${response}\n                                        ${err.responseText || JSON.stringify(err)}<br>\n                                        ${args}\n                                        ${JSON.stringify(courseargs)}\n                                    </div>\n                                `;\n                            $('#ajx-err').html(fullError);\n                        });\n                    }\n\n                    else {\n\n                    }\n                }\n\n            });\n        }\n    };\n});\n\n"],"names":["define","$","Ajax","str","init","msg","status","statustxt","response","args","get_strings","key","component","then","results","catch","e","alert","click","courseId","this","attr","action","confirm","courseargs","courseid","parseInt","toString","call","methodname","fadeOut","err","fullError","get_string","message","statusText","responseText","JSON","stringify","html"],"mappings":"AAAAA,gCAAO,CAAC,SAAU,YAAY,aAAa,SAAUC,EAAGC,KAAKC,WAElD,CACHC,KAAM,eAEEC,IACAC,OACAC,UACAC,SACAC,KAUHN,IAAIO,YARS,CACV,CAAEC,IAAK,MAAOC,UAAW,kBACzB,CAAED,IAAK,SAAUC,UAAW,kBAC5B,CAAED,IAAK,YAAaC,UAAW,kBAC/B,CAAED,IAAK,WAAYC,UAAW,kBAC9B,CAAED,IAAK,OAAQC,UAAW,oBAGJC,MAAK,SAAUC,SACrCT,IAAMS,QAAQ,GACdR,OAASQ,QAAQ,GACjBP,UAAYO,QAAQ,GACpBN,SAAWM,QAAQ,GACnBL,KAAOK,QAAQ,MAChBC,OAAM,SAAUC,GACfC,MAAM,0BAA2BD,MAIrCf,EAAE,2BAA2BiB,OAAM,eAC3BC,SAAWlB,EAAEmB,MAAMC,KAAK,WACxBC,OAASrB,EAAEmB,MAAMC,KAAK,kBAEX,QAAXC,QAC2D,GAAvDC,QAAQ,4CAAqD,KACzDC,WAAa,CACbC,SAAUC,SAASP,UACnBG,OAAQA,OAAOK,YAEnBzB,KAAK0B,KAAK,CAAC,CACPC,WAAY,iCACZpB,KAAMe,cACN,GAAGX,MAAK,WACRZ,EAAE,OAASkB,UAAUW,QAAQ,QAC9Bf,OAAM,SAAUgB,SACXC,sIAEmB7B,IAAI8B,WAAW,SAAS,oFACjC5B,gBAAO0B,IAAIG,SAAW,+DACtB5B,mBAAUyB,IAAIzB,QAAU,+DACxBC,sBAAawB,IAAII,YAAc,+DAC/B3B,8DACAuB,IAAIK,cAAgBC,KAAKC,UAAUP,8DACnCtB,0DACA4B,KAAKC,UAAUd,8FAG7BvB,EAAE,YAAYsC,KAAKP"}