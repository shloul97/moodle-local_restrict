define("local_restrict/distrpute",["jquery","core/ajax","core/str"],(function($,Ajax,str){return{init:function(){var msg,status,statustxt,response,args;str.get_strings([{key:"msg",component:"local_restrict"},{key:"status",component:"local_restrict"},{key:"statustxt",component:"local_restrict"},{key:"response",component:"local_restrict"},{key:"args",component:"local_restrict"}]).then((function(results){msg=results[0],status=results[1],statustxt=results[2],response=results[3],args=results[4]})).catch((function(e){alert("Failed to load strings:",e)})),$(".mform").submit((function(e){var _data$find;e.preventDefault();var data=$(this).serializeArray(),labs=[],quizes=[];let course_debug=null===(_data$find=data.find((x=>"course"===x.name)))||void 0===_data$find?void 0:_data$find.value,labs_debug=data.filter((x=>"labs[]"===x.name)).map((x=>x.value));if(!course_debug.length||labs_debug.length<=0)alert("Please Select Course and Labs");else{$(this).find('input[name="labs[]"]:checked').each((function(){labs.push($(this).val())})),$(this).find('input[name="quizes[]"]:checked').each((function(){quizes.push($(this).val())}));var usersArgs={courseid:parseInt(data[2].value),labs:labs,quiz:quizes};Ajax.call([{methodname:"local_restrict_get_users",args:usersArgs}])[0].then((function(res){var msgDiv=$(".msg-div");msgDiv.removeClass("msg-err msg-success"),0===res.status?msgDiv.html(res.message).addClass("msg-err").fadeIn(200):msgDiv.html(res.message).addClass("msg-success").fadeIn(200)})).catch((function(err){let fullError='\n                                    <div style="color:red;">\n                                        <strong> '.concat(str.get_string("ajxerr","local_restrict"),"</strong><br>\n                                        ").concat(msg," ").concat(err.message||"N/A","<br>\n                                        ").concat(status," ").concat(err.status||"N/A","<br>\n                                        ").concat(statustxt," ").concat(err.statusText||"N/A","<br>\n                                        ").concat(response,"\n                                        ").concat(err.responseText||JSON.stringify(err),"<br>\n                                        ").concat(args,"\n                                        ").concat(JSON.stringify(usersArgs),"\n                                    </div>\n                                ");$("#ajx-err").html(fullError)}))}})),$("input[name=course]").change((function(){var quizesArgs={courseid:parseInt($(this).val())};Ajax.call([{methodname:"local_restrict_get_quizes",args:quizesArgs}])[0].then((function(res){let html="";1==res.status&&($.each(res.message,(function(index,value){html+='<div class="form-check form-check-inline" data-id="'.concat(index,'">\n                                <input class="form-check-input" name="quizes[]" type="checkbox"\n                                id="checkbox').concat(value.id,'" value="').concat(value.id,'">\n                                <label class="form-check-label" for="checkbox').concat(value.id,'">').concat(value.name,"</label>\n                            </div>")})),$("#quizes-div").html(html))})).catch((function(err){let fullError='\n                                    <div style="color:red;">\n                                        <strong> '.concat(str.get_string("ajxerr","local_restrict"),"</strong><br>\n                                        ").concat(msg," ").concat(err.message||"N/A","<br>\n                                        ").concat(status," ").concat(err.status||"N/A","<br>\n                                        ").concat(statustxt," ").concat(err.statusText||"N/A","<br>\n                                        ").concat(response,"\n                                        ").concat(err.responseText||JSON.stringify(err),"<br>\n                                        ").concat(args,"\n                                        ").concat(JSON.stringify(quizesArgs),"\n                                    </div>\n                                ");$("#ajx-err").html(fullError)}))}))}}}));

//# sourceMappingURL=distrpute.min.js.map.